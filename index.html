<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>jQuery Cascader Plugin Example</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/quartz/bootstrap.min.css" />
	<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/fontawesome.min.css"
		integrity="sha512-B46MVOJpI6RBsdcU307elYeStF2JKT87SsHZfRSkjVi4/iZ3912zXi45X5/CBr/GbCyLx6M1GQtTKYRd52Jxgw=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="./cascader.css" type="text/css">
</head>

<body>
	<div class="container" style="margin:150px auto">
		<h3>jQuery Cascader Plugin Example</h3>
		<p class="lead">
			This jQuery plugin generates a user-friendly, multi-column cascading dropdown list from an array of JS
			objects and allows you to append it to any text field within the document.
		</p>
		<h3>Original Plugins </h3>
		<p class="lead">Most of the code has changed.
			such as parsing data, changing the search function, changing the getLabelist function, adding open, close and finally select functions, the added functions were not made by the developer, so this is why I made the changes. I also changed a little bit in the css section, font size and others. hopefully the Zhan Dong developer allows this change. I actually hope the plugins are updated, it seems not. ORIGINAL PLUGINS
			<a href="https://www.jqueryscript.net/form/cascading-selection-box.html"> <i class="fas fa-arrow-right"
					style="margin-right: 10px;"></i>Here</a>
		</p>

		<!-- Create an input field on the page -->
		<input type="text" id="test" class="" autocomplete="off" />

	</div>
	<!-- Load the necessary jQuery library -->
	<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
	<!-- Load the cascader plugin's JavaScript -->
	<script src="./cascader.js"></script>
	<!-- Load data -->
	<script src="./languages.js"></script>
	<!-- Font Awesome -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js"
		integrity="sha512-6sSYJqDreZRZGkJ3b+YfdhB3MzmuP9R7X1QZ6g5aIXhRvR1Y/N/P47jmnkENm7YL3oqsmI6AK+V6AD99uWDnIw=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>
		$(function () {
			// $('#test').zdCascader('close'); // Fungsi untuk menutup dropdown
			// $('#test').zdCascader('open'); 
			// parse the data
			languages.forEach(function (item) {
				item.label = item.name;
				item.value = item.id;
				if (item.children && item.children.length) {
					parseData(item.children);
				}
			});
			// initialize the plugin on the input field and done
			$('#test').zdCascader({
				data: languages,
				container: '#test',
				iconSelected: '<i class="fa-solid fa-check"></i>',
        		iconPostfix: '<i class="fa-solid fa-angle-right"></i>', 
				search: true,
				onChange: function (value, label, datas) {
					// console.log(value);
					// console.log(label);
					// console.log(datas);
					// console.log(value, label, datas);
					let id = ($.isArray(label.value)) ? label.value.slice(-1)[0] : label.value;
					if ($.isArray(label.value)) {
						// mendapatkan id dari hasil penelusuran/pencarian
						let ids = datas[0].value;
						// reconstruct data
						$('#test').zdCascader('reload');
						$('#test').zdCascader('select', ids);
					} else {
						// mendapatkan id dari seleksi klik
						let ids = datas.map(item => item.id).sort();
					}
				}
			});
			// Select Data By ID
			$('#test').zdCascader('select', [2, 22, 222]);
		});

		function parseData(data) {
			data.forEach(function (item) {
				item.label = item.name;
				item.value = item.id;
				if (item.children && item.children.length) {
					parseData(item.children);
				}
			});
		}
	</script>
</body>

</html>